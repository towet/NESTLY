<header class="fixed top-0 w-full z-50" [ngClass]="{'scrolled': isScrolled}">
  <div class="flex items-center justify-between px-4 h-20 md:px-8 relative">
    <!-- Mobile Menu Button with modern gradient styling -->
    <button class="hamburger-button block md:hidden focus:outline-none transition-all duration-300 ease-in-out"
            (click)="toggleMobileMenu()"
            aria-label="Toggle menu"
            [ngClass]="{'open': isMobileMenuOpen}"
            [attr.aria-expanded]="isMobileMenuOpen">
      <div class="hamburger-icon-container">
        <span class="hamburger-line line-1"></span>
        <span class="hamburger-line line-2"></span>
        <span class="hamburger-line line-3"></span>
      </div>
    </button>

    <!-- Logo positioned at left on desktop with fixed positioning -->
    <div class="logo-wrapper md:static absolute left-1/2 transform -translate-x-1/2 md:translate-x-0">
      <a routerLink="/" class="logo-container flex items-center cursor-pointer">
        <img src="assets/logo.png" alt="NESTLY Logo" class="logo-image" />
      </a>
    </div>

    <!-- Desktop Navigation with margin-left to make room for logo -->
    <nav class="hidden md:flex items-center justify-end flex-1 space-x-8 px-8">
      <!-- Properties -->
      <div class="relative group">
        <a class="text-sm font-medium text-indigo-900 hover:text-indigo-600 transition-colors flex items-center space-x-2">
          <div class="icon-circle bg-gradient-to-r from-purple-500 to-indigo-600">
            <i class="fas fa-home"></i>
          </div>
          <span>Properties</span>
          <svg class="w-4 h-4 transition-transform duration-300 group-hover:rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
          </svg>
        </a>
        <div class="absolute left-0 mt-1 w-48 bg-white rounded-md shadow-lg dropdown-menu">
          <div class="py-1">
            <a routerLink="/properties/residential" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center">
              <i class="fas fa-building text-pink-500 mr-2"></i>
              Residential
            </a>
            <a routerLink="/properties/commercial" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center">
              <i class="fas fa-briefcase text-purple-500 mr-2"></i>
              Commercial
            </a>
            <a routerLink="/properties/land" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center">
              <i class="fas fa-tree text-green-500 mr-2"></i>
              Land & Plots
            </a>
          </div>
        </div>
      </div>

      <!-- Short Stays -->
      <a routerLink="/short-stays/serviced-apartments" class="text-sm font-medium text-indigo-900 hover:text-indigo-600 transition-colors flex items-center space-x-2">
        <div class="icon-circle bg-gradient-to-r from-amber-400 to-yellow-500">
          <i class="fas fa-bed"></i>
        </div>
        <span>Short Stays</span>
      </a>

      <a routerLink="/commercial/office-spaces" class="text-sm font-medium text-indigo-900 hover:text-indigo-600 transition-colors flex items-center space-x-2">
        <div class="icon-circle bg-gradient-to-r from-blue-400 to-blue-600">
          <i class="fas fa-desktop"></i>
        </div>
        <span>Office Spaces</span>
      </a>

      <a routerLink="/commercial/retail-spaces" class="text-sm font-medium text-indigo-900 hover:text-indigo-600 transition-colors flex items-center space-x-2">
        <div class="icon-circle bg-gradient-to-r from-emerald-400 to-teal-500">
          <i class="fas fa-store"></i>
        </div>
        <span>Retail Spaces</span>
      </a>

      <a routerLink="/about" class="text-sm font-medium text-indigo-900 hover:text-indigo-600 transition-colors flex items-center space-x-2">
        <div class="icon-circle bg-gradient-to-r from-pink-400 to-rose-500">
          <i class="fas fa-info-circle"></i>
        </div>
        <span>About</span>
      </a>

      <!-- Help -->
      <a routerLink="/help" class="text-sm font-medium text-indigo-900 hover:text-indigo-600 transition-colors flex items-center space-x-2">
        <div class="icon-circle bg-gradient-to-r from-indigo-400 to-purple-500">
          <i class="fas fa-question-circle"></i>
        </div>
        <span>Help</span>
      </a>
      
      <!-- Contact Us (replacing button with icon) -->
      <a routerLink="/help/contact-support" class="text-sm font-medium text-indigo-900 hover:text-indigo-600 transition-colors flex items-center space-x-2">
        <div class="icon-circle bg-gradient-to-r from-cyan-400 to-blue-500">
          <i class="fas fa-envelope"></i>
        </div>
        <span>Contact Us</span>
      </a>
    </nav>

    <!-- Improved Mobile Menu with Animation and Modern Design -->
    <div class="mobile-menu md:hidden" [ngClass]="{'open': isMobileMenuOpen}">
      <div class="px-4 pt-3 pb-4 space-y-2">
        <!-- Properties Section -->
        <div class="mobile-nav-section bg-white rounded-xl shadow-sm overflow-hidden">
          <button class="w-full flex justify-between items-center px-4 py-3 text-base font-medium text-gray-800 focus:outline-none"
                  (click)="toggleMobileSubMenu('properties')">
            <span class="flex items-center">
              <div class="icon-circle bg-gradient-to-r from-purple-500 to-indigo-600 mr-3 small">
                <i class="fas fa-home"></i>
              </div>
              Properties
            </span>
            <i class="fas fa-chevron-down text-xs text-indigo-500" [ngClass]="{'rotate-180': openMobileSubMenu === 'properties'}"></i>
          </button>
          <div class="mobile-submenu" [ngClass]="{'open': openMobileSubMenu === 'properties'}">
            <a routerLink="/properties/residential" class="block px-4 py-3 text-base text-gray-600 hover:bg-gray-100 transition-colors duration-200 flex items-center">
              <i class="fas fa-building text-pink-500 mr-3 fa-fw"></i>
              Residential
            </a>
            <a routerLink="/properties/commercial" class="block px-4 py-3 text-base text-gray-600 hover:bg-gray-100 transition-colors duration-200 flex items-center">
              <i class="fas fa-briefcase text-purple-500 mr-3 fa-fw"></i>
              Commercial
            </a>
            <a routerLink="/properties/land" class="block px-4 py-3 text-base text-gray-600 hover:bg-gray-100 transition-colors duration-200 flex items-center">
              <i class="fas fa-tree text-green-500 mr-3 fa-fw"></i>
              Land & Plots
            </a>
          </div>
        </div>

        <!-- Short Stays Section -->
        <div class="mobile-nav-section bg-white rounded-xl shadow-sm overflow-hidden">
          <a routerLink="/short-stays/serviced-apartments" class="block px-4 py-3 text-base font-medium text-gray-800 hover:bg-gray-50 transition-colors duration-200 flex items-center">
            <div class="icon-circle bg-gradient-to-r from-amber-400 to-yellow-500 mr-3 small">
              <i class="fas fa-bed"></i>
            </div>
            Short Stays
          </a>
        </div>

        <!-- Office Spaces Section -->
        <div class="mobile-nav-section bg-white rounded-xl shadow-sm overflow-hidden">
          <a routerLink="/commercial/office-spaces" class="block px-4 py-3 text-base font-medium text-gray-800 hover:bg-gray-50 transition-colors duration-200 flex items-center">
            <div class="icon-circle bg-gradient-to-r from-blue-400 to-blue-600 mr-3 small">
              <i class="fas fa-desktop"></i>
            </div>
            Office Spaces
          </a>
        </div>

        <!-- Retail Spaces Section -->
        <div class="mobile-nav-section bg-white rounded-xl shadow-sm overflow-hidden">
          <a routerLink="/commercial/retail-spaces" class="block px-4 py-3 text-base font-medium text-gray-800 hover:bg-gray-50 transition-colors duration-200 flex items-center">
            <div class="icon-circle bg-gradient-to-r from-emerald-400 to-teal-500 mr-3 small">
              <i class="fas fa-shopping-bag"></i>
            </div>
            Retail Spaces
          </a>
        </div>

        <!-- About Section -->
        <div class="mobile-nav-section bg-white rounded-xl shadow-sm overflow-hidden">
          <a routerLink="/about" class="block px-4 py-3 text-base font-medium text-gray-800 hover:bg-gray-50 transition-colors duration-200 flex items-center">
            <div class="icon-circle bg-gradient-to-r from-indigo-400 to-indigo-600 mr-3 small">
              <i class="fas fa-info"></i>
            </div>
            About Us
          </a>
        </div>

        <!-- Contact Section -->
        <div class="mobile-nav-section bg-white rounded-xl shadow-sm overflow-hidden">
          <a routerLink="/help/contact-support" class="block px-4 py-3 text-base font-medium text-gray-800 hover:bg-gray-50 transition-colors duration-200 flex items-center">
            <div class="icon-circle bg-gradient-to-r from-blue-400 to-blue-600 mr-3 small">
              <i class="fas fa-envelope"></i>
            </div>
            Contact Us
          </a>
        </div>
      </div>
    </div>

    <!-- Mobile Search Panel with animation -->
    <div class="md:hidden border-t mobile-search-panel" [ngClass]="{'expanded': isSearchExpanded, 'collapsed': !isSearchExpanded}" *ngIf="isSearchExpanded">
      <div class="p-4">
        <div class="relative">
          <input type="text" 
                 [(ngModel)]="search.location"
                 (input)="onLocationInput($event)"
                 placeholder="Search properties..."
                 class="w-full px-4 py-2 rounded-lg border border-gray-300 
                        focus:ring-2 focus:ring-indigo-500">
          <div class="absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center space-x-2">
            <i *ngIf="searchCoordinates" class="fas fa-check-circle text-green-500"></i>
            <button class="text-gray-400 focus:outline-none"
                    (click)="performSearch()">
              <i class="fas fa-search"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>
